"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),V={key:0},B={class:"puri-row-center"},N={class:"flex-grow text-center active:scale-95 transition-all"},b={class:"puri-date-picker-month-container"},C=["onClick"],S={key:1},T={class:"puri-row-center"},$={class:"puri-date-picker-date-title-container"},x={class:"puri-date-picker-date-item"},F={class:"puri-date-picker-date-container"},M=["onClick"],A=["onClick"],_=["onClick"],L=e.defineComponent({__name:"datePicker",props:e.mergeModels({range:{type:Boolean},month:{type:Boolean},firstDay:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(p){const o=e.useModel(p,"modelValue"),v=p,m=e.ref(new Date(Array.isArray(o.value)?o.value[0]:o.value)),d=e.ref(new Date(Array.isArray(o.value)?o.value[1]:o.value)),n=e.ref({year:m.value.getFullYear(),month:m.value.getMonth(),day:m.value.getDate()}),u=e.ref({year:d.value.getFullYear(),month:d.value.getMonth(),day:d.value.getDate()}),a=e.ref({year:n.value.year,month:n.value.month}),h=e.ref(["日","一","二","三","四","五","六"]),g=e.computed(()=>new Date(a.value.year,a.value.month+1,0).getDate()),f=e.computed(()=>{const r=new Date(a.value.year,a.value.month,0),t=(r.getDay()+1-(v.firstDay??0))%7+(k.value.length+g.value<=35?7:0);return new Array(t).fill("").map((l,i)=>r.getDate()-t+1+i)}),k=e.computed(()=>{const r=new Date(a.value.year,a.value.month+1,0),t=7+((v.firstDay??0)-r.getDay()-1)%7;return new Array(t).fill("").map((l,i)=>1+i)});function s(r,t,l){v.range?n.value.year===u.value.year&&n.value.month===u.value.month&&n.value.day===u.value.day?(new Date(n.value.year,n.value.month,n.value.day).getTime()<new Date(r,t,l).getTime()?u.value={year:r,month:t,day:l}:n.value={year:r,month:t,day:l},o.value=[new Date(n.value.year,n.value.month,n.value.day).toISOString().slice(0,10),new Date(u.value.year,u.value.month,u.value.day).toISOString().slice(0,10)]):(n.value={year:r,month:t,day:l},u.value={year:r,month:t,day:l},o.value=[new Date(r,t,l).toISOString().slice(0,10)]):(a.value={year:r,month:t},n.value={year:r,month:t,day:l},o.value=new Date(r,t,l).toISOString().slice(0,10))}function y(r,t,l){if(v.range){if(n.value.year===r&&n.value.month===t&&n.value.day===l)return"range-start";if(u.value.year===r&&u.value.month===t&&u.value.day===l)return"range-end";if(new Date(n.value.year,n.value.month,n.value.day).getTime()<new Date(r,t,l).getTime()&&new Date(u.value.year,u.value.month,u.value.day).getTime()>new Date(r,t,l).getTime())return"range"}else if(n.value.year===r&&n.value.month===t&&n.value.day===l)return"selected";return""}function D(r,t){if(v.range){if(n.value.year===r&&n.value.month===t&&n.value.month===u.value.month&&n.value.year===u.value.year)return"selected";if(n.value.year===r&&n.value.month===t)return"range-start";if(u.value.year===r&&u.value.month===t)return"range-end";if(new Date(n.value.year,n.value.month).getTime()<new Date(r,t).getTime()&&new Date(u.value.year,u.value.month).getTime()>new Date(r,t).getTime())return"range"}else if(n.value.year===r&&n.value.month===t)return"selected"}const c=e.ref("prev");function E(){c.value="prev",a.value={year:a.value.month===0?a.value.year-1:a.value.year,month:a.value.month===0?11:a.value.month-1}}function w(){c.value="next",a.value={year:a.value.month===11?a.value.year+1:a.value.year,month:a.value.month===11?0:a.value.month+1}}return(r,t)=>(e.openBlock(),e.createBlock(e.Transition,null,{default:e.withCtx(()=>[a.value.month===-1?(e.openBlock(),e.createElementBlock("div",V,[e.createElementVNode("div",B,[e.createElementVNode("button",{class:"puri-date-switch",onClick:t[0]||(t[0]=l=>a.value.year--)},t[3]||(t[3]=[e.createElementVNode("i",{class:"bi bi-chevron-compact-left"},null,-1)])),e.createElementVNode("button",N,e.toDisplayString(`${a.value.year}年`),1),e.createElementVNode("button",{class:"puri-date-switch",onClick:t[1]||(t[1]=l=>a.value.year++)},t[4]||(t[4]=[e.createElementVNode("i",{class:"bi bi-chevron-compact-right"},null,-1)]))]),t[5]||(t[5]=e.createElementVNode("div",{class:"puri-date-picker-date-title-container"},[e.createElementVNode("div",{class:"puri-date-picker-date-item col-span-7"},"选择月份")],-1)),t[6]||(t[6]=e.createElementVNode("div",{class:"h-[1px] bg-gray-200/50 dark:bg-neutral-700/50 my-2"},null,-1)),e.createElementVNode("div",b,[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],(l,i)=>e.createElementVNode("div",{class:e.normalizeClass(["puri-date-picker-month-item",D(a.value.year,i)]),onClick:O=>a.value.month=i},e.toDisplayString(l),11,C)),64))])])):(e.openBlock(),e.createElementBlock("div",S,[e.createElementVNode("div",T,[e.createElementVNode("button",{class:"puri-date-switch",onClick:E},t[7]||(t[7]=[e.createElementVNode("i",{class:"bi bi-chevron-compact-left"},null,-1)])),e.createElementVNode("button",{onClick:t[2]||(t[2]=l=>a.value.month=-1),class:"flex-grow text-center active:scale-95 transition-all"},e.toDisplayString(`${a.value.year}年${a.value.month+1}月`),1),e.createElementVNode("button",{class:"puri-date-switch",onClick:w},t[8]||(t[8]=[e.createElementVNode("i",{class:"bi bi-chevron-compact-right"},null,-1)]))]),e.createElementVNode("div",$,[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(7,l=>e.createElementVNode("div",null,[e.createElementVNode("div",x,e.toDisplayString(h.value[(l+(v.firstDay??0)-1)%h.value.length]),1)])),64))]),t[9]||(t[9]=e.createElementVNode("div",{class:"h-[1px] bg-gray-200/50 dark:bg-neutral-700/50 my-2"},null,-1)),e.createElementVNode("div",F,[e.createVNode(e.TransitionGroup,{name:`puri-date-${c.value}-container`},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(f.value,l=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["puri-date-picker-date-p-item",y(a.value.month===0?a.value.year-1:a.value.year,a.value.month===0?12:a.value.month-1,l)]),onClick:i=>{c.value="prev",s(a.value.month===0?a.value.year-1:a.value.year,a.value.month===0?12:a.value.month-1,l)},key:`${a.value.month===0?a.value.year-1:a.value.year},${a.value.month===0?12:a.value.month-1},${l}`},e.toDisplayString(l),11,M))),128)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(g.value,l=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["puri-date-picker-date-item",y(a.value.year,a.value.month,l)]),onClick:i=>s(a.value.year,a.value.month,l),key:`${a.value.year},${a.value.month},${l}`},e.toDisplayString(l),11,A))),128)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(k.value,l=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["puri-date-picker-date-p-item",y(a.value.month===11?a.value.year+1:a.value.year,a.value.month===11?0:a.value.month+1,l)]),onClick:i=>{c.value="next",s(a.value.month===11?a.value.year+1:a.value.year,a.value.month===11?0:a.value.month+1,l)},key:`${a.value.month===11?a.value.year+1:a.value.year},${a.value.month===11?0:a.value.month+1},${l}`},e.toDisplayString(l),11,_))),128))]),_:1},8,["name"])])]))]),_:1}))}});exports.default=L;
//# sourceMappingURL=datePicker.vue2.js.map
